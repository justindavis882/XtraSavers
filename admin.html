<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xtra Savers | Internal Work Order Gen</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        /* --- SCREEN STYLES (The Dashboard) --- */
        :root {
            --bg-dark: #1e293b;
            --bg-card: #334155;
            --text-light: #f8fafc;
            --accent: #D4AF37; /* Gold */
            --danger: #ef4444;
            --success: #22c55e;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
            display: flex;
            gap: 20px;
            padding: 20px;
            height: 100vh;
            overflow: hidden; /* Prevent double scrollbars */
        }

        /* LEFT PANEL: The Input Form */
        .editor-panel {
            flex: 1;
            background: var(--bg-card);
            padding: 20px;
            border-radius: 12px;
            overflow-y: auto;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        h2 { border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-top: 0; }
        h3 { margin-top: 20px; margin-bottom: 10px; color: #94a3b8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full-width { grid-column: span 2; }

        label { display: block; font-size: 0.85rem; margin-bottom: 5px; color: #cbd5e1; }
        
        input, select {
            width: 100%;
            background: #0f172a;
            border: 1px solid #475569;
            color: white;
            padding: 10px;
            border-radius: 6px;
            font-family: 'Roboto Mono', monospace; /* Monospace for numbers */
        }
        
        input:focus { outline: 1px solid var(--accent); }

        .item-row { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; }
        .item-row input[type="text"] { flex: 2; } /* Name */
        .item-row input[type="number"] { flex: 1; } /* Cost */

        /* RIGHT PANEL: The Live Preview */
        .preview-panel {
            width: 450px; /* Slightly wider than 4in to allow padding */
            background: #0f172a;
            padding: 20px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .print-btn {
            background-color: var(--accent);
            color: #1e293b;
            font-weight: 800;
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        .print-btn:hover { transform: scale(1.05); background-color: #fff; }

        /* --- THE 4x6 LABEL (This is what prints) --- */
        #thermal-label {
            width: 4in;
            height: 6in;
            background: white;
            color: black;
            padding: 0.25in;
            box-sizing: border-box;
            font-family: 'Roboto Mono', monospace;
            position: relative;
            display: flex;
            flex-direction: column;
            border: 1px dashed #444; /* Dashed border just for screen preview */
        }

        /* Label Typography */
        .lbl-header { border-bottom: 2px solid black; padding-bottom: 10px; margin-bottom: 10px; }
        .lbl-title { font-size: 16px; font-weight: 900; text-transform: uppercase; }
        .lbl-meta { font-size: 10px; display: flex; justify-content: space-between; margin-top: 5px; }
        
        .lbl-client { font-size: 12px; font-weight: bold; margin-bottom: 10px; }
        
        .lbl-list { flex-grow: 1; }
        .lbl-item { 
            display: flex; 
            justify-content: space-between; 
            border-bottom: 1px dotted #ccc; 
            padding: 4px 0; 
            font-size: 10px; 
        }
        .lbl-checkbox { 
            width: 12px; height: 12px; border: 1px solid black; display: inline-block; margin-right: 5px; 
        }

        .lbl-financials { 
            border-top: 2px solid black; 
            padding-top: 5px; 
            font-size: 10px;
        }
        .lbl-fin-row { display: flex; justify-content: space-between; margin-bottom: 2px; }
        .lbl-total { font-weight: 900; font-size: 14px; margin-top: 5px; }
        .lbl-profit { font-size: 10px; text-align: right; margin-top: 2px; } /* Internal only! */

        /* --- PRINT MEDIA QUERY (The Magic) --- */
        @media print {
            body * { visibility: hidden; } /* Hide everything */
            #thermal-label, #thermal-label * { visibility: visible; } /* Show label */
            
            #thermal-label {
                position: absolute;
                left: 0;
                top: 0;
                width: 4in;
                height: 6in;
                border: none; /* Remove the preview border */
                margin: 0;
                padding: 0.1in; /* Small padding for printer margins */
            }
            
            /* Hide the Profit line if you check the box */
            body.hide-profit .lbl-profit { display: none; }
        }
    </style>
</head>
<body>

    <div class="editor-panel">
        <h2>Job Ticket Builder</h2>
        
        <form id="orderForm">
            <h3>1. Client Info</h3>
            <div class="form-grid">
                <div class="full-width">
                    <label>Client / Company Name</label>
                    <input type="text" id="in_client" placeholder="ACME Corp" oninput="updateLabel()">
                </div>
                <div>
                    <label>Order Date</label>
                    <input type="date" id="in_date" oninput="updateLabel()">
                </div>
                <div>
                    <label>Due Date</label>
                    <input type="date" id="in_due" oninput="updateLabel()">
                </div>
            </div>

            <h3>2. Job Specs</h3>
            <div class="form-grid">
                <div>
                    <label>Quantity of Kits</label>
                    <input type="number" id="in_qty" value="10" oninput="updateLabel()">
                </div>
                <div>
                    <label>Theme</label>
                    <select id="in_theme" oninput="updateLabel()">
                        <option>New Hire</option>
                        <option>Appreciation</option>
                        <option>Event Swag</option>
                        <option>Custom</option>
                    </select>
                </div>
            </div>

            <h3>3. Kit Contents (Cost is per unit)</h3>
            <div id="itemList">
                <div class="item-row">
                    <input type="text" placeholder="Item 1 (e.g. Hoodie)" class="item-name" oninput="updateLabel()">
                    <input type="number" placeholder="Cost ($)" class="item-cost" oninput="updateLabel()">
                </div>
                <div class="item-row">
                    <input type="text" placeholder="Item 2" class="item-name" oninput="updateLabel()">
                    <input type="number" placeholder="Cost ($)" class="item-cost" oninput="updateLabel()">
                </div>
                <div class="item-row">
                    <input type="text" placeholder="Item 3" class="item-name" oninput="updateLabel()">
                    <input type="number" placeholder="Cost ($)" class="item-cost" oninput="updateLabel()">
                </div>
                <div class="item-row">
                    <input type="text" placeholder="Item 4" class="item-name" oninput="updateLabel()">
                    <input type="number" placeholder="Cost ($)" class="item-cost" oninput="updateLabel()">
                </div>
                <div class="item-row">
                    <input type="text" placeholder="Packaging (Box + Fill)" class="item-name" value="Custom Box + Fill" oninput="updateLabel()">
                    <input type="number" placeholder="Cost ($)" class="item-cost" value="5.00" oninput="updateLabel()">
                </div>
            </div>

            <h3>4. Financials</h3>
            <div class="form-grid">
                <div>
                    <label>Sell Price Per Kit ($)</label>
                    <input type="number" id="in_sell" value="50.00" oninput="updateLabel()">
                </div>
                <div>
                    <label>Shipping Charge ($)</label>
                    <input type="number" id="in_ship" value="15.00" oninput="updateLabel()">
                </div>
                <div class="full-width">
                    <label>
                        <input type="checkbox" id="hideProfit" style="width:auto;"> 
                        Hide Profit on Print? (Check this if showing client)
                    </label>
                </div>
            </div>
        </form>
    </div>

    <div class="preview-panel">
        <div id="thermal-label">
            <div class="lbl-header">
                <div class="lbl-title">JOB TICKET</div>
                <div class="lbl-meta">
                    <span id="out_date">YYYY-MM-DD</span>
                    <span id="out_theme">THEME</span>
                </div>
            </div>

            <div class="lbl-client">
                CLIENT: <span id="out_client">NAME</span>
            </div>

            <div style="font-weight:bold; margin-bottom:5px; border-bottom:1px solid black;">PACKING LIST:</div>
            <div class="lbl-list" id="out_list">
                </div>

            <div class="lbl-financials">
                <div class="lbl-fin-row">
                    <span>QTY:</span>
                    <span id="out_qty">0</span>
                </div>
                <div class="lbl-fin-row">
                    <span>UNIT COST:</span>
                    <span id="out_unit_cost">$0.00</span>
                </div>
                <div class="lbl-total">
                    TOTAL INVOICE: <span id="out_invoice">$0.00</span>
                </div>
                <div class="lbl-profit" id="lbl-profit-row">
                    Est. Profit: <span id="out_profit">$0.00</span>
                </div>
            </div>
        </div>

        <button class="print-btn" onclick="printLabel()">üñ®Ô∏è Print 4x6 Label</button>
    </div>

    <script>
        // Set today's date by default
        document.getElementById('in_date').valueAsDate = new Date();

        function updateLabel() {
            // 1. Get Values
            const client = document.getElementById('in_client').value || "CLIENT NAME";
            const date = document.getElementById('in_date').value;
            const theme = document.getElementById('in_theme').value.toUpperCase();
            const qty = parseFloat(document.getElementById('in_qty').value) || 0;
            const sellPrice = parseFloat(document.getElementById('in_sell').value) || 0;
            const shipping = parseFloat(document.getElementById('in_ship').value) || 0;

            // 2. Update Header Info
            document.getElementById('out_client').innerText = client;
            document.getElementById('out_date').innerText = date;
            document.getElementById('out_theme').innerText = theme;
            document.getElementById('out_qty').innerText = qty;

            // 3. Process Items & Calculate Cost
            let totalUnitCost = 0;
            const itemList = document.getElementById('itemList');
            const outputList = document.getElementById('out_list');
            outputList.innerHTML = ''; // Clear current list

            // Loop through inputs
            const names = itemList.querySelectorAll('.item-name');
            const costs = itemList.querySelectorAll('.item-cost');

            names.forEach((nameInput, index) => {
                const name = nameInput.value;
                const cost = parseFloat(costs[index].value) || 0;
                
                if(name) {
                    totalUnitCost += cost;
                    // Create visual row
                    const div = document.createElement('div');
                    div.className = 'lbl-item';
                    div.innerHTML = `
                        <span><span class="lbl-checkbox"></span> ${name}</span>
                        <span>$${cost.toFixed(2)}</span>
                    `;
                    outputList.appendChild(div);
                }
            });

            // 4. Calculate Totals
            const totalProjectCost = (totalUnitCost * qty) + shipping; // Only accurate if shipping is cost to you, but simplified here
            const totalInvoice = (sellPrice * qty) + shipping;
            const totalProfit = totalInvoice - (totalUnitCost * qty); // Rough profit calc

            // 5. Update Financials on Label
            document.getElementById('out_unit_cost').innerText = "$" + totalUnitCost.toFixed(2);
            document.getElementById('out_invoice').innerText = "$" + totalInvoice.toFixed(2);
            document.getElementById('out_profit').innerText = "$" + totalProfit.toFixed(2);
        }

        function printLabel() {
            // Check if we should hide profit
            if(document.getElementById('hideProfit').checked) {
                document.body.classList.add('hide-profit');
            } else {
                document.body.classList.remove('hide-profit');
            }
            window.print();
        }

        // Run once on load
        updateLabel();
    </script>
</body>
</html>